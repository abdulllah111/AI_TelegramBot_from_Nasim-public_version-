# Телеграм-бот ассистент на базе OpenAI

Это проект телеграм-бота, который выполняет роль личного ассистента. Бот построен на асинхронной архитектуре с использованием библиотеки `python-telegram-bot` и интегрирован с API OpenAI для генерации осмысленных ответов.

## Ключевые особенности

- **Асинхронная работа**: Бот использует `asyncio` для эффективной обработки запросов.
- **Интеграция с OpenAI**: Генерирует ответы с помощью моделей OpenAI, доступных через OpenRouter.
- **Модульная структура**: Код разделен на логические блоки (handlers, services, utils), что упрощает его понимание и расширение.
- **Управление доступом**: Бот отвечает только администратору, ID которого указан в конфигурации.
- **История чата**: Бот сохраняет историю переписки для каждого пользователя, что позволяет вести контекстный диалог.
- **Изолированное окружение**: Все зависимости управляются через виртуальное окружение `venv`.

## Структура проекта

```
assistantBotPython/
├── venv/                  # Виртуальное окружение
├── src/                   # Основной исходный код
│   ├── data/              # Данные (истории чатов, пользователи) - игнорируется Git
│   ├── handlers/          # Обработчики команд и сообщений Telegram
│   │   └── handlers.py
│   ├── services/          # Взаимодействие с внешними API (OpenAI)
│   │   └── gpt.py
│   ├── utils/             # Вспомогательные функции
│   │   └── helpers.py
│   ├── bot.py             # Логика и настройка приложения `python-telegram-bot`
│   └── config.py          # Конфигурация (токены, ID)
├── .gitignore             # Файлы и папки, игнорируемые Git
├── main.py                # Точка входа для запуска бота
├── README.md              # Этот файл
└── requirements.txt       # Зависимости проекта
```

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd AI_TelegramBot_from_Nasim-public_version-
```

### 2. Настройка окружения

Создайте и активируйте виртуальное окружение:

```bash
# Создать venv
python -m venv venv

# Активировать venv в Windows
venv\Scripts\activate

# Активировать venv в macOS/Linux
source venv/bin/activate
```

### 3. Установка зависимостей

Установите все необходимые библиотеки:

```bash
pip install -r requirements.txt
```

### 4. Конфигурация

Перед запуском необходимо указать ваши учетные данные в файле `src/config.py`:

- `BOT_TOKEN`: Токен вашего телеграм-бота. Его можно получить у [@BotFather](https://t.me/BotFather).
- `ADMIN_ID`: Ваш личный Telegram User ID. Вы можете узнать его у ботов вроде [@userinfobot](https://t.me/userinfobot).

Также убедитесь, что в файле `src/services/gpt.py` указан ваш `API_KEY` для доступа к OpenRouter или другому сервису OpenAI.

### 5. Запуск бота

Для запуска бота выполните команду:

```bash
python main.py
```

Бот начнет работу и будет готов принимать сообщения. Для остановки нажмите `Ctrl+C` в терминале.

## Доступные команды

- `/start` - Отправляет приветственное сообщение.
- `/clear_history` - (Только для администратора) Очищает и архивирует историю переписки.
